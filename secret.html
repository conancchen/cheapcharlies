<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <!-- Prevent Safari mobile zoom on double-tap or pinch -->
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
  <title>Secret Counter</title>
  <link rel="stylesheet" href="css/style.css" />

  <style>
    /* Full-screen black overlay to completely block underlying content */
    #password-overlay {
      position: fixed;
      top: 0; left: 0;
      width: 100vw; height: 100vh;
      background: #000;
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 1000;
    }
    #password-prompt {
      background: #111;
      padding: 2rem;
      border: 2px solid #fff;
      border-radius: 8px;
      text-align: center;
      color: #fff;
    }
    #password-prompt input {
      padding: 0.5rem;
      font-size: 1rem;
      margin-top: 1rem;
      width: 100%;
      box-sizing: border-box;
      border: 1px solid #ccc;
      border-radius: 4px;
    }
    #password-prompt button {
      margin-top: 1rem;
      padding: 0.5rem 1rem;
      font-size: 1rem;
      border: 2px solid #fff;
      background: #fff;
      color: #000;
      border-radius: 4px;
      cursor: pointer;
    }
    #password-error {
      color: #f55;
      margin-top: 0.5rem;
      display: none;
    }

    /* Page styles remain hidden until overlay dismissed */
    body {
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 2rem 1rem;
      background: #87efff;
      font-family: Arial, sans-serif;
      color: #000;
      text-align: center;
      -webkit-user-select: none;
      user-select: none;
      touch-action: manipulation;
    }
    h1 {
      margin-bottom: 0.5rem;
      font-size: 2rem;
      font-weight: bold;
    }
    #instruction {
      margin-bottom: 1rem;
      font-size: 1rem;
      color: #333;
    }
    #counter {
      font-size: 4rem;
      font-weight: bold;
      margin: 1rem 0;
    }
    #manish-img {
      max-width: 60vw;
      max-height: 40vh;
      border: 4px solid #000;
      border-radius: 8px;
      margin-bottom: 1rem;
      cursor: pointer;
      transition: transform 0.1s ease;
      touch-action: manipulation;
    }
    #manish-img.shrink { transform: scale(0.9); }
    #messages { margin-top: 1rem; width: 80vw; max-width: 300px; text-align: left; }
    #messages p { background: rgba(255,255,255,0.8); padding: 0.5rem; border: 1px solid #000; border-radius: 4px; margin: 0.25rem 0;font-size:0.9rem; }
    .site-nav { margin-bottom: 2rem; touch-action: manipulation; }
    .site-nav a { color: #000; text-decoration: none; font-weight: bold; margin:0 0.5rem; padding:0.25rem 0.5rem; border-radius:8px; transition:background-color 0.2s; touch-action: manipulation; }
    .site-nav a:hover { background-color: rgba(0,0,0,0.1); }
  </style>
</head>
<body>
  <!-- Password Overlay -->
  <div id="password-overlay">
    <div id="password-prompt">
      <h2>Enter Password</h2>
      <input type="password" id="password-input" placeholder="Password" />
      <button id="password-submit">Enter</button>
      <p id="password-error">Incorrect password</p>
    </div>
  </div>

  <nav class="site-nav"><a href="index.html">Cheap Charlies Compass</a></nav>
  <h1>F Manish Counter</h1>
  <p id="instruction">Click the picture to F Manish</p>
  <div id="counter"></div>
  <img id="manish-img" src="images/manish.jpg" alt="Manish">
  <div id="messages"></div>

  <script>
    // Secure client‐side: store only a SHA-256 hash of the password
    const PASSWORD_HASH = '730551f5bad4af0604f661e7f8b82e6a6c364ca19ce140166333d86cdc814ca6'; // sha256('your_password')
    const overlay = document.getElementById('password-overlay');
    const inputEl = document.getElementById('password-input');
    const submitBtn = document.getElementById('password-submit');
    const errorEl = document.getElementById('password-error');

    // Compute SHA-256 hash of input
    async function hashPwd(pwd) {
      const buf = await crypto.subtle.digest('SHA-256', new TextEncoder().encode(pwd));
      return Array.from(new Uint8Array(buf)).map(b => b.toString(16).padStart(2,'0')).join('');
    }

    async function checkPassword() {
      const h = await hashPwd(inputEl.value);
      if (h === PASSWORD_HASH) {
        overlay.style.display = 'none';
      } else {
        errorEl.style.display = 'block';
      }
    }
    submitBtn.addEventListener('click', checkPassword);
    inputEl.addEventListener('keydown', e => { if (e.key === 'Enter') checkPassword(); });

    // Counter logic
    const API = 'https://script.google.com/macros/s/AKfycbwqF0QBTXnAmZMh43jmxxKp9emTYJw8iQPGctAbvedN7mzy2_qvK0S4TyCw73Y11r8tsw/exec';
    const counterEl = document.getElementById('counter');
    const img = document.getElementById('manish-img');
    const messagesContainer = document.getElementById('messages');
    let sessionClicks = 0;
    let globalCount = null;
    const thresholds = [25,50,75,100,125,150,175,200,225,250,275,300,325,350,400,450,500,1000];
    const messageList = [
      'Goodmorning','Need any support from me?','Do you want some massage parlor recs?','Is that ladyboy fucking you in the ass?',
      'It is all about exposure, going to events man. Learning about different industries.','Mike Tyson is coming to Bangkok and I am doing his security',
      'Oh you have the shits? BPHRLLLLL BPRHLLL (on the BTS btw)','Tell me tell me. I am your friend',
      'I used to host the biggest Bollywood parties in London','250 clicks! Keep clicking for more messages', 'Qassim are you fucking her in the ass or is she fucking you in the ass (poor Yoye)',
      'How are things going?', 'Please also help me come up with some ideas for content I can post for my LinkedIn to be more of a VC investor finance advisor etc, and for anything I could post for LinkedIn', 
      'Im chill guys u can tell me. im a rlly chill manager', 'Got enough work? Or big chilling atm. help me research the techsauce VCs', 'i love thailand where you can invite a private masseuse to ur house in the morning', 
      '500 clicks! Last message will be at 1000', '1000 clicks. Show this to Conan/Qassim for a free drink at Cheap Charlies'];
    function updateMessages() {
      messagesContainer.innerHTML = '';
      thresholds.forEach((t,i)=>{
        if (sessionClicks>=t) { const p=document.createElement('p'); p.textContent=messageList[i]; messagesContainer.appendChild(p);}  });
    }
    counterEl.textContent='Loading…';
    fetch(API).then(r=>r.json()).then(d=>{ globalCount=d.count||0; counterEl.textContent=globalCount; });
    function incrementCounter(){ if(globalCount===null)return; img.classList.add('shrink'); setTimeout(()=>img.classList.remove('shrink'),100); navigator.vibrate?.(50); sessionClicks++; updateMessages(); globalCount++; counterEl.textContent=globalCount; fetch(API,{method:'POST'}).then(r=>r.json()).then(d=>{ globalCount=d.count; counterEl.textContent=globalCount; }); }
    img.addEventListener('click',incrementCounter); document.addEventListener('keydown',e=>{ if(e.code==='Space'){e.preventDefault();incrementCounter();}});
    messagesContainer.innerHTML='';
  </script>
</body>
</html>
